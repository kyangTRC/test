<!DOCTYPE html>
<html>
<body>
<p id="demo"></p>
<p id="test"></p>
<script>
 
  	const account_user = ["TRCSolutions", "ActUser"];

    const t_account_user = ["CRESALES", "TRCTEST"];

  	let sLoginRequest = "http://parcelstream.com/admin/getSIK.aspx?ACCOUNT=" + t_account_user[0] + "&LOGIN=" + t_account_user[1];

  	let wkt = "LINESTRING (-95.9621226483684 36.066442984799,-95.9630934684588 36.0657434232634,-95.9630934684588 36.0641015951692,-95.9621226483684 36.0641015951692,-95.9621226483684 36.0611463046)";

    function sessionInit() {
      var xhttp = new XMLHttpRequest();
      xhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
          parseSessionInit(this);
        }
      };
      xhttp.open("GET", sLoginRequest, true);
      xhttp.send();
    }

  sessionInit();
  function parseSessionInit(xml) {
    var xmlDoc = xml.responseXML;
    document.getElementById("demo").innerHTML = xmlDoc;
  }

  /*
  let temp = http://dc1.parcelstream.com/_T197/InitSession.aspx?sik=_T197/b1034f3f-40a4-44fd-9b77-c11b0eb9d62c-101400_570474633&output=xml
  */
	let datacenter = "dc1";

	let candy = "xINBuuymZ0px5mpsdeJucAISxjCdVq9xtn1GUg~~";

	let url = "http://parcelstream.com/getquery.aspx?output=documentation/" + datacenter + "/GetQuery.aspx?";
	            url += "&dataSource=" + wkt;
	            url += "&maxRecords=1"; // ony take the first record. If you need to code for multiple records that works just need to return WKT seperated by a simi colon 
	            url += "&output=xml"; // for my example comment out and un comment json
	            url += "&output=json";
	            url += "&fields=GEOMETRY"; // only need the WKT
	            url += "&SS_CANDY=" + candy;
	            url += "&showSchema=false"; // adds the schema to the result. In this case we do not need it
	            url += "&_dmp_debug=true";  


  var xhttp = new XMLHttpRequest();
  
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      document.getElementById("test").innerHTML = this.responseText;
    }
  };
  xhttp.open("GET", url, true);
  //xhttp.setRequestHeader("Origin", 'parcelstream.com');
  xhttp.send();
</script>
</body>
</html>
